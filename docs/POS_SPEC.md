# POS 시스템 설계 명세서

> 12개 매장 프랜차이즈 (업종: 요식업 - 치킨, 한식)  
> 운영 지역: 태국 (฿ THB 기준)

---

## 0. 화면·페이지 구성

### 0.1 전체 구조

| 구분 | 용도 | 접근 |
|------|------|------|
| **ERP** | 전사 통합 관리 | 본사 관리자 |
| **POS** | 매장 운영·주문·결산 | 매장 직원·관리자 |

### 0.2 ERP 페이지 (기존 + 확장)

| 메뉴 | 관리 항목 |
|------|------|
| 매출·재무 | 매출액, 매장별·일별 집계, 결산 현황 |
| 세무·e-Tax | 태국 e-Tax 신고 (PP.30 등) |
| 품목·재고 | 재료 품목, 재고, 발주 |
| 거래처 | 공급업체, 매입 |
| 직원 | 직원 정보, 근태, 급여 등 |
| 기타 | 설정, 리포트 등 전사 공통 업무 |

### 0.3 POS 전용 페이지 (별도)

| 페이지 | 용도 | 사용처 |
|------|------|------|
| **POS 메인** | 주문 접수·결제 | 매장 카운터, 태블릿 |
| **테이블 배치** | 테이블 위치 설정 | 매장 관리 |
| **메뉴 관리** | 판매 메뉴 등록 (재료와 별도) | 본사/매장 |
| **회원·포인트** | 회원, 등급, 포인트·쿠폰 지급 | 매장 |
| **결산** | 일별 결산, 돈통 시제, 결제수단별 | 매장 |
| **프린터 설정** | 매장별 출력 설정 | 매장 |

### 0.4 URL·라우트 구조

| 용도 | URL | 비고 |
|------|-----|------|
| **모바일** | `/` | https://choongman-erp.vercel.app/ |
| **관리자** | `/admin` | https://choongman-erp.vercel.app/admin |
| **POS** | `/pos` | https://choongman-erp.vercel.app/pos |

### 0.5 POS 라우트 상세

```
/pos                → POS 메인 (주문·결제) - 카운터, 태블릿
/pos/tables         → 테이블 배치 설정
/pos/menu           → 메뉴 관리
/pos/members        → 회원·포인트
/pos/settlement     → 결산
/pos/settings       → POS 설정 (프린터 등)

※ POS 설정·메뉴 관리 등은 /admin 내에서도 접근 가능 (통합 관리)
```

---

## 1. 기본 구조

### 1.1 역할 분리

| 구분 | 설명 | 비고 |
|------|------|------|
| **품목 관리** | 재료 관리 (치킨, 양념, 밀가루 등) | 기존 유지 |
| **메뉴 관리** | 판매 상품 (재료로 만드는 음식) | 신규 |
| **POS** | 주문·결제·결산 | 신규 |

### 1.2 주문 유형

| 유형 | 설명 |
|------|------|
| 매장 | 내식 |
| 포장 | 테이크아웃 |
| 배달 | 배달앱·자체 배달 (앱 종류별 추후 상세) |

---

## 2. 메뉴 관리

| 항목 | 내용 |
|------|------|
| 메뉴명 | 후라이드치킨, 양념치킨, 김치찌개 등 |
| 카테고리 | 치킨, 한식 등 |
| 판매가 | ฿ (태국 바트) |
| 구성 재료 | 품목(재료) 여러 개 연결 |
| 옵션 | 반반, 뼈/순살, 사이즈 등 |
| 세트 | 치킨+음료+감자튀김 등 |
| VAT | 7% (태국 부가가치세) - 포함가/미포함가 구분 |

---

## 3. POS 주문

### 3.1 주문 처리

- 테이블/주문 유형 선택
- 메뉴·수량·옵션 입력
- 할인·쿠폰 적용
- 합계·결제

### 3.2 주문 상세 기능

| 항목 | 내용 |
|------|------|
| 주문 수정 | 결제 전 주문 변경·추가·삭제 |
| 주문 상태 | 주문됨 → 조리중 → 완료 → 서빙 (주방·서버 동기화) |
| 재주문 | 최근 주문 빠른 재주문 (단골·반복 메뉴) |
| 손님 메모 | 알레르기, 맵기 조절, 특별 요청 |
| 품절/단종 | 메뉴 품절 표시, 당일 단종 처리 |
| 시즌 가격 | 런치특가, 해피아워 등 시간대별 가격 |

### 3.3 결제 상세 기능

| 항목 | 내용 |
|------|------|
| 분할 결제 | 카드+현금, 2명 이상 각각 결제 |
| 부분 환불 | 일부 항목만 취소·환불 |
| 가격 오버라이드 | 관리자 권한으로 특가·할인 적용 |

### 3.4 결제 수단 (태국 기준)

| 구분 | 결제 수단 |
|------|-----------|
| 현금 | Cash (เงินสด) |
| 카드 | 신용/체크 (Visa, Mastercard, JCB 등) |
| QR/모바일 | PromptPay, TrueMoney, LINE Pay, Rabbit LINE Pay, SCB Easy |
| 배달앱 | GrabFood, FoodPanda, LINE MAN, Robinhood 등 |

### 3.5 운영 요금

| 항목 | 내용 |
|------|------|
| 배달费 | 배달 주문 시 배달费 자동 계산 |
| 포장费 | 포장용기费 (선택) |
| 최소 주문 | 배달 최소 주문 금액 설정 |

---

## 4. 테이블 배치 시각화

| 항목 | 내용 |
|------|------|
| 기능 | 매장별 테이블 위치 시각적 배치 |
| 동작 | 테이블 추가·이동·삭제, 평면도에 드래그 배치 |
| 표시 | 테이블 번호, 이용중/빈자리, 주문 현황 |
| 저장 | 매장별 레이아웃 개별 저장 |

---

## 5. 매일 결산

### 5.1 돈통 시제 맞추기

| 항목 | 내용 |
|------|------|
| 시스템 합계 | 현금 결제 누적액 표시 |
| 실제 시제 | 직원이 돈통 현금 세어서 입력 |
| 차액 | 시스템 vs 시제 비교 (과다/부족) |

### 5.2 결제 수단별 입력

| 수단 | 세부 | 입력 |
|------|------|------|
| 현금 | - | 시스템 vs 돈통 시제 |
| 카드 | 신용/체크/제휴 | 종류별 금액 입력 |
| 배달앱 | Grab, FoodPanda, LINE MAN 등 | 앱별 금액 입력 |
| QR | PromptPay, TrueMoney, LINE Pay 등 | 서비스별 금액 입력 |
| 기타 | 상품권 등 | 필요 시 추가 |

### 5.3 결산 마감

- 입력 합계 vs 시스템 합계 비교
- 차액 확인 후 마감
- 마감 후 해당 일자 수정 제한 (관리자만 가능)
- 일별 결산 리포트 조회·출력

---

## 6. 직원·권한

| 항목 | 내용 |
|------|------|
| 로그인 | 직원별 계정, 비밀번호 |
| 권한 | 주문만 / 결산만 / 관리자 등 역할별 |
| 교대 | 근무 교대 기록 |
| 담당자 | 일자별·주문별 담당 직원 기록 |

---

## 7. 할인·프로모션

| 항목 | 내용 |
|------|------|
| 프로모션 | 세트 할인, 기간 한정 이벤트 |
| 쿠폰 | 쿠폰 코드 입력, % 또는 금액 할인 |
| 회원 할인 | 회원 등급별 할인 (→ 8. 손님 회원 연동) |

---

## 8. 손님 회원

### 8.1 현재 (LINE MAN OA)

| 항목 | 내용 |
|------|------|
| **현재 사용** | LINE MAN OA에서 포인트 적립·사용, 등급 관리 |
| **장기 계획** | POS에서 통합 관리 + 별도 손님용 앱 |

### 8.2 회원 기능 (POS 통합)

| 항목 | 내용 |
|------|------|
| **회원 등록** | 이름, 전화번호, 생일, LINE ID 등 |
| **회원 조회** | 주문 시 전화번호/LINE ID로 검색 |
| **등급** | 일반/실버/골드 등 등급별 할인율 |
| **포인트** | 적립·사용 (POS에서 차감·적립 처리) |
| **생일 쿠폰** | 생일 기념 할인/증정 |
| **주문 이력** | 회원별 주문 이력 조회 |
| **LINE MAN 연동** | 기존 OA 포인트/등급 → POS로 이전 또는 연동 (추후) |

### 8.3 지급 기능 (포인트·쿠폰)

| 항목 | 내용 |
|------|------|
| **포인트 지급** | 직원/관리자가 회원에게 포인트 부여 |
| **쿠폰 지급** | 특정 회원에게 쿠폰 발급 |
| **지급 사유** | 보상, 프로모션, 생일, 관리자 재량 등 사유 기록 |
| **권한** | 지급은 관리자 또는 지정 권한 직원만 |
| **내역** | 지급·사용 내역 추적 |

### 8.4 손님용 앱 (별도 필요)

| 항목 | 내용 |
|------|------|
| **역할** | 손님이 포인트 확인·사용, 등급 조회, 주문 등 |
| **기능** | 포인트 잔액, 적립·사용 내역, 쿠폰함, 지급받은 쿠폰/포인트 확인, 간편 주문 등 |
| **영수증 QR** | 영수증 QR 스캔 → 포인트 즉시 적립 (→ 10.4) |
| **채널** | 전용 앱 또는 LINE MAN OA 연동, 웹앱 등 |
| **타이밍** | POS 구축 후 별도 단계 |

---

## 9. 재고 연동

| 항목 | 내용 |
|------|------|
| 자동 차감 | 메뉴 판매 시 연결된 재료 자동 차감 |
| 부족 알림 | 재료 부족 시 알림 |
| 발주 연동 | 부족 시 발주 연동 (기존 품목 관리 활용) |

---

## 10. 출력·프린터

### 10.1 매장당 프린터 구성 (일반 3대)

| 위치 | 용도 | 비고 |
|------|------|------|
| **카운터** | 손님 영수증 | 1대 |
| **주방 1** | 치킨 주문서 | 카테고리별 출력 |
| **주방 2** | 한식 주문서 | 카테고리별 출력 |

### 10.2 유연한 구성

| 상황 | 내용 |
|------|------|
| 소형 매장 | 주방 프린터 1대만 사용 (치킨+한식 통합) |
| 설정 | 매장별로 주방 프린터 1대/2대 선택 가능 |

### 10.3 출력물 종류

| 출력물 | 출력 위치 |
|------|------|
| 손님 영수증 | 카운터 |
| 주방 주문서 (치킨) | 주방 1 |
| 주방 주문서 (한식) | 주방 2 |
| 일별 결산 리포트 | 카운터 (또는 관리 PC) |

### 10.4 손님 영수증 QR 코드

| 항목 | 내용 |
|------|------|
| **QR 코드** | 영수증에 QR 코드 출력 |
| **기능** | 스캔 시 포인트 적립 페이지/앱 연결 |
| **흐름** | 주문 완료 → 영수증 출력(QR 포함) → 손님이 스캔 → 포인트 즉시 적립 |
| **미가입자** | QR 스캔 시 회원가입 유도 후 포인트 적립 |

---

## 11. 프랜차이즈 본사 기능

| 항목 | 내용 |
|------|------|
| 메뉴·가격 푸시 | 본사 → 매장 메뉴/가격 일괄 적용 |
| 매장별 가격 | 매장별 가격 차이 설정 가능 |
| 집계 | 매장별/일별/주간 매출 리포트 |
| 대시보드 | 본사용 종합 대시보드 |

---

## 12. 태국 세무·영수증

| 항목 | 내용 |
|------|------|
| 세금 영수증 | ใบกำกับภาษี (Tax Invoice) 요건 대응 |
| VAT 7% | 포함가/미포함가 구분, 계산 지원 |
| **e-Tax 신고** | 태국 전자세금신고 연동 |
| **신고 대상** | VAT(PP.30), 부가가치세 월/분기 신고 |
| **데이터** | 매출·매입 집계 → e-Tax 형식 생성·전송 |

### 12.1 매출 2원화 (실매출 vs 신고매출)

| 구분 | 내용 |
|------|------|
| **실매출** | 실제 매출액 - 내부 운영·분석용 |
| **신고매출** | 세무소 신고용 금액 - e-Tax 신고용 |
| **저장** | 두 금액 별도 보관, 구분 조회 |
| **집계** | 일별·월별 실매출 / 신고매출 각각 리포트 |
| **입력** | 실매출=자동 집계, 신고매출=결산 시 별도 입력 또는 비율 적용 |
| **권한** | 신고매출 입력·수정은 관리자만 |

### 12.2 태국 e-Tax 신고 상세

| 항목 | 내용 |
|------|------|
| **시스템** | 재정부 전자세금신고 (RD e-Tax) |
| **신고서** | PP.30 (VAT), PND.50 등 필요 서류 |
| **연동** | ERP **신고매출** 데이터 → e-Tax 형식 변환 |
| **타이밍** | 월별/분기별 신고 기한 안내 |
| **ERP 위치** | 관리자 > 세무 > e-Tax 신고 메뉴 |

---

## 13. 배달앱 연동

| 항목 | 내용 |
|------|------|
| 연동 방식 | API 연동 vs 수동 입력 (추후 결정) |
| 주문 매칭 | 배달앱 주문번호 ↔ POS 주문 연결 |
| 정산 | 앱별 정산 금액 입력·비교 |

---

## 14. 기기·화면

| 항목 | 내용 |
|------|------|
| **태블릿** | 태블릿으로 주문 접수 - 터치 최적화 UI |
| **PC/키오스크** | 매장 카운터용 |
| **반응형** | 태블릿·PC 화면 크기 대응 |
| **터치 UI** | 버튼 크기, 스와이프 등 터치 친화적 |

---

## 15. 기타

| 항목 | 내용 |
|------|------|
| 오프라인 | 인터넷 끊김 시 기본 주문·결제 가능 여부 검토 |
| 다국어 | 한국어/태국어/영어 등 (추후 별도 구현) |
| 통화 | ฿ (THB), DD/MM/YYYY 날짜 형식 |
| **실시간 대시보드** | 당일 매출·주문 수, 조리중·대기 건수, 매장 전환 조회 |
| **KDS** | 주방 디스플레이 - 주방용 화면 (프린터 대체 또는 병행) |
| **PCI 보안** | 결제 카드 정보 보안 기준 준수 |

---

## 16. 구현 우선순위

| 단계 | 내용 |
|------|------|
| **1단계** | 메뉴 관리, 주문, 결제, 기본 결산 |
| **2단계** | 테이블 배치, 결제수단별·돈통 시제 결산 |
| **3단계** | 직원·권한, 할인/쿠폰, 주문서/영수증 출력 |
| **4단계** | 재고 연동, 프랜차이즈 본사 집계 |
| **5단계** | 배달앱 연동, 세금 영수증, 오프라인 |
| **5-1** | 태국 e-Tax 신고 (PP.30 등) 연동 |
| **6단계** | 회원(포인트·등급) POS 통합, LINE MAN OA 연동/이전 |
| **7단계** | 손님용 앱 (포인트·쿠폰·주문) |

---

## 17. LINE MAN OA → POS 전환

| 구분 | 내용 |
|------|------|
| **현재** | LINE MAN OA에서 포인트·등급 관리 |
| **목표** | POS에서 포인트·등급 통합 관리 |
| **손님용** | 별도 앱으로 포인트 조회·사용, 쿠폰 등 |
| **전환** | OA 데이터 이전 또는 API 연동 검토 (추후) |

---

---

## 18. 포함 기능 요약 (확정)

※ 아래 항목 모두 명세에 반영되어 구현 대상입니다.

### 18.1 주문·결제·운영

- 주문 수정, 주문 상태, 재주문, 손님 메모
- 분할 결제, 부분 환불, 가격 오버라이드
- 품절/단종, 배달费/포장费, 최소 주문, 시즌 가격
- 실시간 대시보드, KDS, PCI 보안

### 18.2 차별화 포인트

- LINE MAN OA 연동
- 영수증 QR 즉시 적립
- 실매출/신고매출 2원화
- 치킨+한식 주방 분리
- 12매장 통합 ERP
- 태국 현지화

---

*작성일: 2025-02*  
*운영 지역: 태국 | 통화: ฿ THB*
